CREATE TABLE participation (id INT AUTO_INCREMENT NOT NULL, auteur_id INT DEFAULT NULL, salon_id INT DEFAULT NULL, livre_id INT DEFAULT NULL, INDEX IDX_AB55E24F60BB6FE6 (auteur_id), INDEX IDX_AB55E24F4C91BDE4 (salon_id), INDEX IDX_AB55E24F37D925CB (livre_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE salon (id INT AUTO_INCREMENT NOT NULL, date DATETIME NOT NULL, nom VARCHAR(255) NOT NULL, ville VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE livre (id INT AUTO_INCREMENT NOT NULL, auteur_id INT DEFAULT NULL, titre VARCHAR(255) NOT NULL, stock INT NOT NULL, INDEX IDX_AC634F9960BB6FE6 (auteur_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE vente (id INT AUTO_INCREMENT NOT NULL, livre_id INT DEFAULT NULL, date DATETIME NOT NULL, source VARCHAR(255) NOT NULL, nb_ventes INT NOT NULL, prix DOUBLE PRECISION NOT NULL, INDEX IDX_888A2A4C37D925CB (livre_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE auteur (id INT AUTO_INCREMENT NOT NULL, pseudo VARCHAR(255) NOT NULL, mdp VARCHAR(255) DEFAULT NULL, nom VARCHAR(255) NOT NULL, prenom VARCHAR(255) NOT NULL, ville VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE service_presse (id INT AUTO_INCREMENT NOT NULL, livre_id INT DEFAULT NULL, nb_donnes INT NOT NULL, destinataire VARCHAR(255) NOT NULL, INDEX IDX_64B0742137D925CB (livre_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE bon_de_depot (id INT AUTO_INCREMENT NOT NULL, livre_id INT DEFAULT NULL, nb_envoyes INT NOT NULL, nb_vendus INT NOT NULL, destinataire VARCHAR(255) NOT NULL, INDEX IDX_EF14E7E237D925CB (livre_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
ALTER TABLE participation ADD CONSTRAINT FK_AB55E24F60BB6FE6 FOREIGN KEY (auteur_id) REFERENCES auteur (id);
ALTER TABLE participation ADD CONSTRAINT FK_AB55E24F4C91BDE4 FOREIGN KEY (salon_id) REFERENCES salon (id);
ALTER TABLE participation ADD CONSTRAINT FK_AB55E24F37D925CB FOREIGN KEY (livre_id) REFERENCES livre (id);
ALTER TABLE livre ADD CONSTRAINT FK_AC634F9960BB6FE6 FOREIGN KEY (auteur_id) REFERENCES auteur (id);
ALTER TABLE vente ADD CONSTRAINT FK_888A2A4C37D925CB FOREIGN KEY (livre_id) REFERENCES livre (id);
ALTER TABLE service_presse ADD CONSTRAINT FK_64B0742137D925CB FOREIGN KEY (livre_id) REFERENCES livre (id);
ALTER TABLE bon_de_depot ADD CONSTRAINT FK_EF14E7E237D925CB FOREIGN KEY (livre_id) REFERENCES livre (id);
